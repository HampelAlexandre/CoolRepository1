<a name="top" />

[**HOME**](Home) > [**SNOWPLOW SETUP GUIDE**](Setting-up-Snowplow) > [**Step 2b: setup a Webhook**](Setting-up-a-webhook) > [[Pagerduty webhook setup]]

## Contents

- 1 [Overview](#overview)
  - 1.1 [Compatibility](#compat)
- 2 [Setup](#setup)
  - 2.1 [PagerDuty](#setup-pagerduty)
  - 2.2 [Snowplow Redshift](#setup-redshift)

<a name="overview" />

## 1. Overview

This webhook integration lets you track a variety of events logged by [PagerDuty][pagerduty-website].

Available events are:

- Trigger
- Acknowledge
- Unacknowledge
- Resolve
- Assign
- Escalate
- Delegate

For the technical implementation, see [[PagerDuty webhook adapter]].

<a name="compat" />

### 1.1 Compatibility

* [Snowplow 0.9.13][snowplow-0.9.13]+ (`POST`-capable collectors for event processing)
* [PagerDuty webhook API][pagerduty-webhooks]

<a name="setup" />

## 2. Setup

Integrating PagerDuty's webhooks into Snowplow is a two-stage process:

1. Configure PagerDuty to send events to Snowplow
2. (Optional) Create the PagerDuty events table into Amazon Redshift

<a name="setup-pagerduty" />

## 2.1 PagerDuty

First login into to your PagerDuty account and select the **Services** button from the top of the screen.

Select which service you would like to add a Webhook endpoint to then click the **Add a webhook** button.

[[/setup-guide/images/webhooks/pagerduty/pagerduty-1.png]]

Fill in the name of your Webhook and the Endpoint URL.

For the Endpoint URL field, you will need to provide the URI to your Snowplow Collector.  We use a special path to tell Snowplow that these events are generated by PagerDuty:

```
http://<collector host>/com.pagerduty/v1?aid=<company code>
```

The `aid=` name-value pair in your URI's querystring is optional; this is the `app_id` parameter taken from the [Snowplow Tracker Protocol][tracker-protocol]. You can use it to specify which company in PagerDuty these call complete events belong to. Putting it all together, our setup screen now looks like this:

[[/setup-guide/images/webhooks/pagerduty/pagerduty-2.png]]

If you want, you can also manually override the event's `platform` parameter like so:

```
http://<collector host>/com.pagerduty/v1?aid=<company code>&p=<platform code>
```

Supported platform codes can again be found in the [Snowplow Tracker Protocol][tracker-protocol]; if not set, then the value for `platform` will default to `srv` for a server-side application.

Click save and from now on when any of the seven available events are triggered an event will also be sent to the Webhook!

<a name="setup-redshift" />

## 2.2 Redshift

If you are running the Snowplow batch flow with Amazon Redshift, then you should deploy the relevent event table into your Amazon Redshift.

You can find the table definition here:

* [incident_1.sql][incident]

Make sure to deploy this table into the same schema as your `events` table.

That's it - with this table deployed, your PagerDuty events should automatically flow through into Redshift.

[pagerduty-website]: http://www.pagerduty.com/
[pagerduty-webhooks]: https://developer.pagerduty.com/documentation/rest/webhooks
[snowplow-0.9.13]: https://github.com/snowplow/snowplow/releases/tag/0.9.13
[tracker-protocol]: https://github.com/snowplow/snowplow/wiki/snowplow-tracker-protocol#1-common-parameters-platform-and-event-independent

[incident]: https://github.com/snowplow/iglu-central/blob/master/sql/com.pagerduty/incident_1.sql
