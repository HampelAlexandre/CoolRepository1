<a name="top" />

[**HOME**](Home) > [**SNOWPLOW SETUP GUIDE**](Setting-up-Snowplow) > [**Step 2b: setup a Webhook**](Setting-up-a-webhook) > [[Pingdom webhook setup]]

## Contents

- 1. [Overview](#overview)  
  - 1.1 [Compatibility](#compat)
- 2. [Setup](#setup)
  - 2.1 [Pingdom](#setup-pingdom)
  - 2.2 [Snowplow Redshift](#setup-redshift)

<a name="overview" />
## 1. Overview

This webhook integration lets you track a variety of events logged by [Pingdom] [pingdom-website].

Available events are:

- Incident assigned
- Incident notification of being closed

For the technical implementation, see [[Pingdom webhook adapter]].

<a name="compat" />
### 1.1 Compatibility

* [Snowplow 0.9.14] [snowplow-0.9.14]+ (`POST`-capable collectors only)
* [Pingdom webhook API] [pingdom-webhooks]

<a name="setup" />
## 2. Setup

Integrating Pingdom's webhooks into Snowplow is a two-stage process:

1. Configure Pingdom to send events to Snowplow
2. (Optional) Create the Pingdom events tables into Amazon Redshift

<a name="setup-pingdom" />
## 2.1 Pingdom

Before we begin a bit of information on how Pingdom uses Webhooks:
* Webhooks are configured on a per user basis.
* They are nested within a series of potential Contact Methods.
* If the Webhook is not the primary contact method there is no guarantee it will be used.

First login to your Pingdom account and click on the **Alerting** button which will be on the left hand side of the screen.

We will now click on **Users** in the submenu of **Alerting**.  

We should now see our available users; select and edit the user you wish to configure a Webhook for.

[[/setup-guide/images/webhooks/pingdom/pingdom-1.png]]

We can now add a Webhook as a **Contact Method** for the user by:
* Clicking the **Add Contact Method** button.
* Selecting URL / Webhook as our method.
* Filling in the Webhook URL.

[[/setup-guide/images/webhooks/pingdom/pingdom-2.png]]

For the URL field you will need to provide the URI to your Snowplow Collector.  We use a special path to tell Snowplow that these events are generated by Pingdom:

```
http://<collector host>/com.pingdom/v1?aid=<company code>
```

The `aid=` name-value pair in your URI's querystring is optional; this is the `app_id` parameter taken from the [Snowplow Tracker Protocol] [tracker-protocol]. You can use it to specify which company in Pingdom these call complete events belong to. Putting it all together, our setup screen now looks like this:

[[/setup-guide/images/webhooks/pingdom/pingdom-2.png]]

If you want, you can also manually override the event's `platform` parameter like so:

```
http://<collector host>/com.pingdom/v1?aid=<company code>&p=<platform code>
```

Supported platform codes can again be found in the [Snowplow Tracker Protocol] [tracker-protocol]; if not set, then the value for `platform` will default to `srv` for a server-side application.

Once we have successfully created our Pingdom Webhook we can either add a Fallback contact method or we can change our Primary contact method.  Pingdom will now be able to send information to the configured webhook!

There are other configurations for how you can be sent information from Pingdom including assigning a different contact method for different warning levels. We suggest having a look at the [Pingdom webhook API] [pingdom-webhooks] for more information on contact methods and settings.

<a name="setup-redshift" />
## 2.2 Redshift

If you are running the Snowplow batch (Hadoop) flow with Amazon Redshift, then you should deploy the relevent event tables into your Amazon Redshift.

You can find the table definitions here:

* [incident_assign_1.sql] [assign]
* [incident_notify_of_close_1.sql] [close]

Make sure to deploy this table into the same schema as your `events` table.

That's it - with this table deployed, your Pingdom events should automatically flow through into Redshift.

[pingdom-website]: https://www.pingdom.com/
[pingdom-webhooks]: https://support.pingdom.com/Knowledgebase/Article/View/94/0/users-and-alerting-end-points
[snowplow-0.9.14]: https://github.com/snowplow/snowplow/releases/tag/0.9.14
[tracker-protocol]: https://github.com/snowplow/snowplow/wiki/snowplow-tracker-protocol#1-common-parameters-platform-and-event-independent

[assign]: https://github.com/snowplow/snowplow/tree/master/4-storage/redshift-storage/sql/com.pingdom/incident_assign_1.sql
[close]: https://github.com/snowplow/snowplow/tree/master/4-storage/redshift-storage/sql/com.pingdom/incident_notify_of_close_1.sql
