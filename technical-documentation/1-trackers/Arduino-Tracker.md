<a name="top" />

[**HOME**](Home) > [**SNOWPLOW TECHNICAL DOCUMENTATION**](SnowPlow technical documentation) > [**Trackers**](trackers)

## Contents

- 1. [Overview](#overview)  
- 2. [General configuration and parameters](#general)
  - 2.1 [Initialization](#init)  
    - 2.1.1 [Required headers](#headers)
    - 2.1.2 [Initialize SnowPlowTracker](#snowplow-tracker-init)
  - 2.2 [Setting the endpoint](#endpoint)  
    - 2.2.1 [`initCf`](#initCf)  
    - 2.2.2 [`initUrl`](#initUrl)
  - 2.3 [Setting the user ID](#user-id)
    - 2.3.1 [`setUserId`](#setUserId)
  - 2.4 [Testing and debugging](#debug-test)
    - 2.4.1 [Setup debugging](#setup-debug)
- 3. [Tracking specific events](#tracking-specific-events)  
  - 3.1 [Common](#common)
    - 3.1.1 [Tracking function structure](#tracking-function-structure)
    - 3.1.2 [Tracking return codes](#tracking-return-codes)
  - 3.2 [Tracking custom structured events](#custom-structured-events)  
    - 3.2.1 [`trackStructEvent` overview](#trackStructEvent)  
    - 3.2.2 [`trackStructEvent` (no `aValue`)](#trackStructEvent-no-aValue)  
    - 3.2.3 [`trackStructEvent` (integer `aValue`)](#trackStructEvent-int-aValue)  
  - 3.3 [Tracking custom unstructured events](#custom-unstructured-events)

<a name="overview" />
## 1. Overview

The [SnowPlow Arduino tracker](https://github.com/snowplow/snowplow-arduino-tracker) allows you to track SnowPlow events from an IP-connected [Arduino] [arduino] board.

The tracker should be straightforward to use if you are familiar with Arduino development; any prior experience with SnowPlow's [JavaScript tracker](Javascript-Tracker) or Google Analytics (which has a similar API) is helpful but not necessary.

Note that this tracker has access to a much more restricted set of SnowPlow events than other trackers.

[Back to top](#top)

<a name="general" />
## 2. General parameters

<a name="init" />
### 2.1 Initialization

You must add some initialization code to the top of your Arduino sketch, before your `setup()` function:

<a name="headers" />
#### 2.1.1 Required headers

Make sure you have the following includes:

```c++
#include <SPI.h>
#include <Ethernet.h>
#include <SnowPlowTracker.h>
```

[Back to top](#top)

<a name="snowplow-tracker-init" />
#### 2.1.2 Initialize SnowPlowTracker

After your includes but before your `setup()` function, initialize your `SnowPlowTracker` something like this:

```c++
// MAC address of this Arduino. Update with your shield's MAC address.
const byte mac[] = { 0x90, 0xA2, 0xDA, 0x00, 0xF8, 0xA0 };

// SnowPlow app name
const char *snowplowAppName = "my-arduino-project";

// SnowPlow Tracker
SnowPlowTracker snowplow(&Ethernet, mac, snowplowAppName);
```

Note that this initialization includes setting the application ID for your Arduino project, as well as your device's MAC address.

[Back to top](#top)

<a name="endpoint" />
### 2.2 Setting the endpoint

Endpoint refers to the location of your collector: you need to point your Arduino tracker to your collector endpoint, to ensure that data generated by your Arduino is logged by the collector.

If you are using a Cloudfront collector you can use [initCf](#initCf) to set the endpoint. If you are using any other collector (e.g. the Clojure collector, or SnowCannon), then you should use [initUrl](#initUrl).

<a name="initCf" />
#### 2.2.1 Setting a Cloudfront endpoint using `initCf()`

You can set the collector endpoint for the Cloudfront collector by adding to your `setup()` function:

```c++
snowplow.initCf("{{CLOUDFRONT-SUBDOMAIN}}");
```

So if your Cloudfront subdomain is `d3rkrsqld9gmqf`, you would include:

```c++
snowplow.initCf("d3rkrsqld9gmqf");
```

This completes the initialization of your `SnowPlowTracker`.

[Back to top](#top)

<a name="initUrl" />
#### 2.2.2 Setting a Cloudfront endpoint using `initCf()`

If you are running a different collector (not the Cloudfront collector) then add to your `setup()` function:

```c++
snowplow.initUrl("{{COLLECTOR-URL}}");
```

So if your collector endpoint is at 'my-company.c.snplow.com' then you would include:

```c++
snowplow.initUrl("my-company.c.snplow.com");
```

This completes the initialization of your `SnowPlowTracker`.

[Back to top](#top)

<a name="user-id" />
### 2.3 Setting the user ID

The Arduino Tracker automatically passes to the collector the `mac_address` supplied on initialization.

However you may want to identify a specific Arduino board by a more business-friendly name. To do this, you use the `setUserId` method.

<a name="setUserId" />
#### 2.3.1 Setting the user ID using `setUserId`

To set a business-friendly user ID for this Arduino, use the `setUserId()` method i.e.:

```c++
snowplow.setUserId("boardroom-arduino");
```

[Back to top](#top)

<a name="debug-test" />
### 2.4 Testing and debugging

Arduino is a difficult platform to test and debug software on, so it's important to understand what options the SnowPlow Arduino Tracker has for debugging.

[Back to top](#top)

<a name="debug" />
#### 2.4.1 Setup debugging

Section to come.

[Back to top](#top)

<a name="tracking-specific-events" />
## 3. Tracking specific events

SnowPlow has been built to enable you to track a wide range of events that occur when users interact with your websites and apps. We are constantly growing the range of functions available in order to capture that data more richly.

<a name="common" />
### 3.1 Common

<a name="tracking-function-structure" />
#### 3.1.1 Tracking function structure

All events are tracked with specific Arduino C++ functions of the form `trackXXX`, where `XXX` is the name of the event to track.

A given event type may have multiple different signatures (to support slightly different argument options or types).

<a name="tracking-return-codes" />
### 3.1.2 Tracking return codes

All `trackXXX` functions return an integer to report the status of the attempt to track the given event object.

_Rest of section to come._

[Back to top](#top)

<a name="custom-structured-events" />
### 3.2 Tracking custom structured events

Custom structured events are the only form of tracking currently supported by the SnowPlow Arduino tracker. Whenever you want to record an event or sensor reading from your IP-connected Arduino, use `trackStructEvent` to send this data to SnowPlow.

Some examples of tracking custom structured events from your Arduino board(s) might include:

* Monitoring the environment (temperature, humidity, light levels etc) in your warehouse/factory/workplace/shop/museum
* Tracking the movement of products around your shop/warehouse/factory using Arduino, [RFID readers] [arduino-rfid] and SnowPlow
* Sending vehicle fleet information (locations, speeds, fuel levels etc) back to SnowPlow using Arduino's [3G and GPS] [3g-gps] shields 

<a name="trackStructEvent" />
#### 3.2.1 `trackStructEvent` overview

There are five arguments associated with each structured event. Of them, only the first two are required:

| **Name**     | **Required?** | **Description**                                                                          |
|-------------:|:--------------|:-----------------------------------------------------------------------------------------|
|  `aCategory` | Yes           | The name you supply for the group of objects you want to track e.g. 'sensor', 'ecomm'     |
|    `aAction` | Yes           | A string which defines the type of user interaction for the web object e.g. 'read-temp', 'wifi-strength' |
|     `aLabel` | No            | An optional string which identifies the specific object being actioned e.g. ID of the sensor being read |
|  `aProperty` | No            | An optional string describing the object or the action performed on it. This might be whether the temperature reading is in Fahrenheit or Celsius |
|     `aValue` | No            | An optional float or double to quantify or further describe the user action. This might be the price of an item added-to-basket, or the starting time of the video where play was just pressed |

There are four slightly different signatures for the `tractStructEvent`, depending on what type of `aValue` you want to supply:

<a name="trackStructEvent-no-aValue" />
#### 3.2.2 `trackStructEvent` (no `aValue`)

The relevant signature for `trackStructEvent` if you have no `aValue` to log is:

```c++
int trackStructEvent(const char *aCategory,
                     const char *aAction,
                     const char *aLabel = NULL,
                     const char *aProperty = NULL) const;
```

Note that this version defaults `aLabel` and `aProperty` to `NULL` if you don't set them. Here's an example invocation:

```c++
snowplow.trackStructEvent("example", "basic ping");
```

See [Tracking return codes](#tracking-return-codes) above for the return codes supported by `trackStructEvent`.

[Back to top](#top)

<a name="trackStructEvent-int-aValue" />
#### 3.2.3 `trackStructEvent` (integer `aValue`)

The relevant signature for `trackStructEvent` if `aValue` is an integer is:

```c++
int trackStructEvent(const char *aCategory,
                     const char *aAction,
                     const char *aLabel,
                     const char *aProperty,
                     const int aValue) const;
```

Notes:

* Because `aValue` must be a float or double, this version of `trackStructEvent` appends ".0" to the end of the int before sending to SnowPlow
* If you don't want to set `aLabel` or `aProperty`, pass in `NULL` in their place

Here's an example invocation:

```c++
snowplow.trackStructEvent("example", "int ping", "age", NULL, 22);
```

See [Tracking return codes](#tracking-return-codes) above for the return codes supported by `trackStructEvent`.

[Back to top](#top)

#### 3.2.4 `trackStructEvent` (xxx)

The relevant signature for `trackStructEvent` if xxx is:

```c++
int trackStructEvent(const char *aCategory,
                     const char *aAction,
                     const char *aLabel,
                     const char *aProperty,
                     const double aValue,
                     const int aValuePrecision = 2) const;
```

Note that xxx. Here's an example invocation:

```c++
xxx
```

See [Tracking return codes](#tracking-return-codes) above for the return codes supported by `trackStructEvent`.

[Back to top](#top)

#### 3.2.5 `trackStructEvent` (xxx)

The relevant signature for `trackStructEvent` if xxx is:

```c++
int trackStructEvent(const char *aCategory,
                     const char *aAction,
                     const char *aLabel,
                     const char *aProperty,
                     const float aValue,
                     const int aValuePrecision = 2) const;
```

Note that xxx. Here's an example invocation:

```c++
xxx
```

See [Tracking return codes](#tracking-return-codes) above for the return codes supported by `trackStructEvent`.

[Back to top](#top)

<a name="custom-unstructured-events" />
### 3.3 Tracking custom unstructured events

This feature is on the roadmap: it has not been developed yet.

<a name="trackUnstructEvent" />
#### 3.3.1 `trackUnstructEvent`

This feature is on the roadmap: it has not been developed yet.

[Back to top](#top)

[arduino]: http://arduino.cc/

[arduino-rfid]: http://arduino.cc/blog/category/wireless/rfid/
[3g-gps]: http://www.cooking-hacks.com/index.php/documentation/tutorials/arduino-3g-gprs-gsm-gps
