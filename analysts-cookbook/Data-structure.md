# Introduction to the SnowPlow Hive tables

Understanding the SnowPlow table structure(s) in Hive is a pre-requisite to being able to write your own HiveQL queries.

This guide assumes that you have collected SnowPlow events and
successfully run the ETL process on the SnowPlow data.

## Hive table definitions

You can load your SnowPlow data into one of two different Hive tables, depending on your use case:

| **TABLE**          | **DESERIALIZER**          | **DESCRIPTION**                                                      |
|:------------------:|:-------------------------:|:--------------------------------------------------------------------:|
| **Events**         | SnowPlowEventDeserializer | Holds page views and other events. The standard SnowPlow use case    |
| **Ad impressions** | SnowPlowAdImpDeserializer | Holds ad impressions. For [ad networks using SnowPlow] [snowplowads] |

To look at each of these table definitions in turn:

### 1. Events

The Hive table generated by **SnowPlowEventDeserializer** to hold SnowPlow-logged page views and events looks like this:

| **FIELD**            | **DATATYPE**   | **CAN BE EMPTY?** | **DESCRIPTION**            |
|:--------------------:|:--------------:|:-----------------:|:--------------------------:|
| **Date/time**        |                |                   | _The date and time of this page view or event_ |
| `dt`                 | STRING         | No                | To describe                |
| `tm`                 | STRING         | No                | To describe                |
| **Transaction**      |                |                   | _Identifying this logging event_ |
| `txn_id`             | STRING         | No                | To describe                |
| **User and visit**   |                |                   | _Identifying the web user and this specific visit_ |
| `user_id`            | STRING         | No                | To describe                |
| `user_ipaddress`     | STRING         | No                | To describe                |
| `visit_id`           | INT            | No                | To describe                |
| **Page**             |                |                   | _Identifying the web page being visited_ |
| `page_url`           | STRING         | No                | To describe                |
| `page_title`         | STRING         | Yes               | To describe                |
| `page_referrer`      | STRING         | No                | To describe                |
| **Marketing**        |                |                   | _Marketing campaign attribution_ |
| `mkt_source`         | STRING         | Yes               | To describe                |
| `mkt_medium`         | STRING         | Yes               | To describe                |
| `mkt_term`           | STRING         | Yes               | To describe                |
| `mkt_content`        | STRING         | Yes               | To describe                |
| `mkt_name`           | STRING         | Yes               | To describe                |
| **Event**            |                |                   | _If this is an event being logged, its details_ |
| `ev_category`        | STRING         | Yes               | To describe                |
| `ev_action`          | STRING         | Yes               | To describe                |
| `ev_label`           | STRING         | Yes               | To describe. Optional for events |
| `ev_property`        | STRING         | Yes               | To describe. Optional for events |
| `ev_value`           | STRING         | Yes               | To describe. Optional for events |
| **Browser**          |                |                   | _Information about the web browser_ |
| `br_name`            | STRING         | TBC               | To describe                |
| `br_family`          | STRING         | TBC               | To describe                |
| `br_version`         | STRING         | TBC               | To describe                |
| `br_type`            | STRING         | TBC               | To describe                |
| `br_renderengine`    | STRING         | TBC               | To describe                |
| `br_lang`            | STRING         | No                | To describe                |
| `br_features`        | ARRAY\<STRING\>  | Yes               | Contains a set of all features supported by this browser, e.g. `fla` for Flash, `pdf` for PDF support |
| `br_cookies`         | BOOLEAN        | No                | To describe                |
| **Operating System** |                |                   | _Information about the host operating system_ |
| `os_name`            | STRING         | TBC               | To describe                |
| `os_family`          | STRING         | TBC               | To describe                |
| `os_manufacturer`    | STRING         | TBC               | To describe                |
| **Device/Hardware**  |                |                   | _Information about the host device/hardware_ |
| `dvce_type`          | STRING         | TBC               | To describe                |
| `dvce_ismobile`      | BOOLEAN        | TBC               | To describe                |
| `dvce_screenwidth`   | INT            | No                | To describe                |
| `dvce_screenheight`  | INT            | No                | To describe                |

### 2. Ad impressions

The Hive table generated by **SnowPlowAdImpDeserializer** to hold SnowPlow-logged ad impressions looks like this:

| **FIELD**            | **DATATYPE**   | **CAN BE EMPTY?** | **DESCRIPTION**            |
|:--------------------:|:--------------:|:-----------------:|:--------------------------:|
| **Date/time**        |                |                   | _The date and time of this page view or event_ |
| `dt`                 | STRING         | No                | To describe                |
| `tm`                 | STRING         | No                | To describe                |
| **Transaction**      |                |                   | _Identifying this logging event_ |
| `txn_id`             | STRING         | No                | To describe                |
| **User and visit**   |                |                   | _Identifying the web user and this specific visit_ |
| `user_id`            | STRING         | No                | To describe                |
| `user_ipaddress`     | STRING         | No                | To describe                |
| `visit_id`           | INT            | No                | To describe                |
| **Page**             |                |                   | _Identifying the web page being visited_ |
| `page_url`           | STRING         | No                | To describe                |
| `page_referrer`      | STRING         | No                | To describe                |
| **Ad impression**    |                |                   | To describe                |
| `ad_campaign_id`     | STRING         | Yes               | To describe                |
| `ad_banner_id`       | STRING         | Yes               | To describe                |
| `ad_advertiser_id`   | STRING         | Yes               | To describe. Optional for events |
| `ad_user_id`         | STRING         | Yes               | To describe. Optional for events |
| **Browser**          |                |                   | _Information about the web browser_ |
| `br_name`            | STRING         | TBC               | To describe                |
| `br_family`          | STRING         | TBC               | To describe                |
| `br_version`         | STRING         | TBC               | To describe                |
| `br_type`            | STRING         | TBC               | To describe                |
| `br_renderengine`    | STRING         | TBC               | To describe                |
| `br_lang`            | STRING         | No                | To describe                |
| `br_features`        | ARRAY\<STRING\>  | Yes               | Contains a set of all features supported by this browser, e.g. `fla` for Flash, `pdf` for PDF support |
| `br_cookies`         | BOOLEAN        | No                | To describe                |
| **Operating System** |                |                   | _Information about the host operating system_ |
| `os_name`            | STRING         | TBC               | To describe                |
| `os_family`          | STRING         | TBC               | To describe                |
| `os_manufacturer`    | STRING         | TBC               | To describe                |
| **Device/Hardware**  |                |                   | _Information about the host device/hardware_ |
| `dvce_type`          | STRING         | TBC               | To describe                |
| `dvce_ismobile`      | BOOLEAN        | TBC               | To describe                |
| `dvce_screenwidth`   | INT            | No                | To describe                |
| `dvce_screenheight`  | INT            | No                | To describe                |

[snowplowads]: http://www.keplarllp.com/blog/2012/05/warehousing-your-online-ad-data-with-snowplow
